
# MSA 기반 서비스 분리 시, Saga 패턴을 활용한 분산 트랜잭션 적용 보고서 

## 개요

이 보고서는 크게 5가지 파트로 구성됩니다.
  
**1) 상황(Situation)** <br>
**2) 작업(Task)** <br>
**3) 행동(Action)** <br>
**4) 결과(Result)** <br>
**5) 참고 자료** <br> 


<br> 
<br>


**1) 상황(Situation)** <br>

<br> 

<img src="https://github.com/user-attachments/assets/2e7b71e7-cbee-4306-ba58-84d144972884" width="50%" />


<br> 

**(1) 모놀리식 -> MSA 전환의 필요성**

- 기존 콘서트 예약 서비스는 **모놀리식 아키텍처**로 개발되어 있었습니다. <br>
  하지만, **서비스 확장성, 서비스별 개별 배포, 서비스별 장애 격리** 등을 고려해 <br>
  이를 **MSA**(MicroServices Architecture)로의 전환을 고려하게 되었습니다.

<br> 

**(2) MSA 환경에서 트랜잭션 관리의 문제점**

- **모놀리식 환경에서 트랜잭션**은 간단하게 동작합니다. <br>
  트랜잭션을 열고, 모든 작업이 완료되면 커밋하고, <br> 
  중간에 문제가 발생하면 롤백하면 됩니다. <br>
    
- 하지만 **MSA 환경에서는 각 서비스가 독립된 DB**를 갖고 있습니다. <br>
  따라서 모놀리식 환경과 동일한 방식으로는 **트랜잭션의 ACID 보장이 어렵습니다**. <br>

- 예를 들어, MSA 환경에서 **예약- 멤버 잔액 차감 - 결제**가 순차적으로 일어나야 하는 MSA 환경에서 <br>
  결제 과정에서 에러가 발생하면 결제 DB의 트랜잭션만 롤백되는 것이 아니라 <br>
  이전 단계인 **예약 및 멤버 잔액 차감의 트랜잭션도 모두 롤백**되어야 합니다. <br>

- 따라서, MSA 환경으로 전환하려면 **분산 트랜잭션 관리가 필요**하며, <br>
  이를 통해 여러 개의 분산 트랜잭션을 하나처럼 관리하고, ACID 보장을 유지해야 했습니다. <br>  




**2) 작업(Task)** <br>
