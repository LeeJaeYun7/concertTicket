

# '1만 RPM 레디스 대기열' 도입 보고서 

## 개요

이 보고서는 크게 5가지 파트로 구성됩니다.
  
**1) 레디스 대기열이란?** <br>
**2) 레디스 대기열 도입 이유** <br>
**3) 레디스 대기열 도입 과정** <br>
**4) 레디스 대기열 구현** <br>
**5) 레디스 대기열 도입을 통해 개선된 점** <br> 

<br> 

### 1) 레디스 대기열이란? 

![image](https://github.com/user-attachments/assets/da19bff3-8c3a-4432-b7ec-36c04a249212)
- 레디스 대기열은 레디스의 **Sorted Set** 자료구조를 활용하여, 마치 '놀이공원의 대기줄'처럼 대기 기능을 구현하는 방식입니다. <br>
  웹 서비스에서는 특정 이벤트(예: 배민 치킨 이벤트)로 인해 순간적으로 대용량 트래픽이 몰릴 수 있는데, <br>
  이러한 상황에서 **레디스 대기열**을 사용하여 트래픽을 효과적으로 제어할 수 있습니다. <br>


![image](https://github.com/user-attachments/assets/882719c4-04bd-4e20-a0ad-0dfe3abb2bc6)
- 레디스의 **Sorted Set** 자료구조는 각 항목이 **스코어(Score)** 값에 따라 정렬되는 고유한 문자열의 집합입니다. <br>
  이를 활용하여, 대용량 트래픽을 **timestamp** 값을 기준으로 Sorted Set에 순차적으로 추가하고, 퇴장시킬 수 있습니다. <br>
  이렇게 하면 대용량 트래픽을 효과적으로 제어할 수 있을 뿐만 아니라, **순서**도 보장할 수 있습니다.



<br> 


 ### 2) 레디스 대기열 도입 이유 

- **콘서트 티켓 예약 서비스**는 사용자가 콘서트 티켓을 예약할 수 있는 기능을 제공합니다. <br>
  이 때, 인기 있는 콘서트의 경우, 한 번에 많은 사람들이 **동시에 예약을 시도**하게 되어 서버의 **트래픽 과부하**가 발생할 수 있습니다. <br>
  이를 해결하기 위해 순간적인 대량 트래픽을 효과적으로 제어하기 위해 **레디스 대기열을 도입**하였습니다. <br>





 ### 3) 레디스 대기열 도입 과정 

**(1) 대기열과 활성화열**

- 레디스 대기열은 **활성화열**과 짝을 이루며 작동합니다. <br> 
  대기열에 있는 대기 인원은 일정 주기마다 **활성화열로 이동**하게 되며, <br>
  **활성화열로 이동**한 인원은 그때부터 **티켓 예약**이 가능합니다. <br> 
  
- 이 때 중요한 점은 **어떤 주기**로 **몇 명**을 대기열에서 활성화열로 전환할 것인지 결정하는 것입니다. <br> 
  주기의 길이, 그리고 전환되는 인원에 따른 **장점과 단점**은 다음과 같습니다. <br> 


| **조건**                                 | **장점**                                 | **단점**                               |
|------------------------------------------|------------------------------------------|----------------------------------------|
| **주기가 길고, 전환되는 인원 수가 적음** | 트래픽을 더 효과적으로 제어할 수 있음    | 고객들의 대기 시간이 길어짐           |
| **주기가 짧고, 전환되는 인원 수가 많음** | 고객들의 대기 시간이 짧음               | 트래픽 과부하 발생 위험                |





